{% extends "base.html" %}

{% block content %}
<div class="columns is-centered">
    <div class="column is-12-mobile is-8-tablet is-6-desktop is-5-widescreen">
        <div class="login-container">
            <div class="box animate__animated animate__fadeIn">
                <div class="has-text-centered mb-5">
                    <span class="icon is-large">
                        <i class="fas fa-shield-alt fa-3x has-text-primary"></i>
                    </span>
                    <h1 class="title has-text-primary mt-2">Login</h1>
                    <p class="subtitle is-6 has-text-grey">Welcome back, please login to your account</p>
                </div>
                
                <form method="POST" id="loginForm">
                    {{ form.hidden_tag() }}
                    
                    <div class="field">
                        <label class="label">{{ form.username.label }}</label>
                        <div class="control has-icons-left">
                            {{ form.username(class="input", placeholder="Enter your username") }}
                            <span class="icon is-small is-left">
                                <i class="fas fa-user"></i>
                            </span>
                        </div>
                        {% if form.username.errors %}
                        <p class="help is-danger">
                            {% for error in form.username.errors %}
                            {{ error }}
                            {% endfor %}
                        </p>
                        {% endif %}
                    </div>
                    
                    <div class="field">
                        <label class="label">{{ form.password.label }}</label>
                        <div class="control has-icons-left">
                            {{ form.password(class="input", placeholder="Enter your password") }}
                            <span class="icon is-small is-left">
                                <i class="fas fa-lock"></i>
                            </span>
                        </div>
                        {% if form.password.errors %}
                        <p class="help is-danger">
                            {% for error in form.password.errors %}
                            {{ error }}
                            {% endfor %}
                        </p>
                        {% endif %}
                    </div>
                    
                    <div class="field">
                        <div class="control">
                            {{ form.remember_me(class="checkbox") }}
                            <label for="remember_me">{{ form.remember_me.label }}</label>
                        </div>
                    </div>
                    
                    <div class="field">
                        <div class="control">
                            <button type="submit" class="button is-primary is-fullwidth" id="loginButton">
                                <span class="icon">
                                    <i class="fas fa-sign-in-alt"></i>
                                </span>
                                <span>Login</span>
                            </button>
                            
                            <!-- Loading Animation (Hidden State) -->
                            <div class="loading-container has-text-centered is-hidden" id="loadingAnimation">
                                <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
                                <p class="has-text-grey mt-2">Logging in...</p>
                            </div>
                        </div>
                    </div>
                </form>
                
                <div class="has-text-centered mt-5">
                    <p class="has-text-grey">Don't have an account? <a href="{{ url_for('register') }}" class="has-text-primary has-text-weight-bold">Register Now</a></p>
                </div>
                
                <!-- Security Tips Section -->
                <div class="mt-5 pt-5 has-text-centered" style="border-top: 1px solid #f0f0f0;">
                    <h5 class="title is-6 has-text-grey mb-4">Security Tips</h5>
                    <div class="columns is-mobile">
                        <div class="column">
                            <span class="icon has-text-primary">
                                <i class="fas fa-fingerprint"></i>
                            </span>
                            <p class="is-size-7 has-text-grey mt-2">Secure Login</p>
                        </div>
                        <div class="column">
                            <span class="icon has-text-primary">
                                <i class="fas fa-lock"></i>
                            </span>
                            <p class="is-size-7 has-text-grey mt-2">Encryption</p>
                        </div>
                        <div class="column">
                            <span class="icon has-text-primary">
                                <i class="fas fa-shield-alt"></i>
                            </span>
                            <p class="is-size-7 has-text-grey mt-2">Anti-Phishing</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Loading Animation Style */
.loading-container {
    margin: 1rem auto;
}
.lds-ring {
    display: inline-block;
    position: relative;
    width: 40px;
    height: 40px;
}
.lds-ring div {
    box-sizing: border-box;
    display: block;
    position: absolute;
    width: 32px;
    height: 32px;
    margin: 4px;
    border: 4px solid var(--primary-color);
    border-radius: 50%;
    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
    border-color: var(--primary-color) transparent transparent transparent;
}
.lds-ring div:nth-child(1) {
    animation-delay: -0.45s;
}
.lds-ring div:nth-child(2) {
    animation-delay: -0.3s;
}
.lds-ring div:nth-child(3) {
    animation-delay: -0.15s;
}
@keyframes lds-ring {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('loginForm');
    const loginButton = document.getElementById('loginButton');
    const loadingAnimation = document.getElementById('loadingAnimation');
    
    loginForm.addEventListener('submit', function(e) {
        // Show loading animation
        loginButton.classList.add('is-hidden');
        loadingAnimation.classList.remove('is-hidden');
    });
});
</script>
{% endblock %} 